
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Basic Send EPS Mitigation Action by IP Address Example &#8212; Cisco pxGrid DXL Client Library 0.1.2 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Basic Send EPS Mitigation Action by MAC Address Example" href="basicepssendmitigationactionbymacexample.html" />
    <link rel="prev" title="Basic Delete ANC Policy Notification Example" href="basicancdeletepolicynotificationexample.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="basicepssendmitigationactionbymacexample.html" title="Basic Send EPS Mitigation Action by MAC Address Example"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basicancdeletepolicynotificationexample.html" title="Basic Delete ANC Policy Notification Example"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cisco pxGrid DXL Client Library 0.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-send-eps-mitigation-action-by-ip-address-example">
<h1>Basic Send EPS Mitigation Action by IP Address Example<a class="headerlink" href="#basic-send-eps-mitigation-action-by-ip-address-example" title="Permalink to this headline">¶</a></h1>
<p>This sample sends a Cisco Endpoint Protection Service (EPS) mitigation action
for an endpoint via DXL and Cisco pxGrid. The sample identifies the endpoint by
its IP address.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The samples configuration step has been completed (see <a class="reference internal" href="sampleconfig.html"><span class="doc">Samples Configuration</span></a>).</li>
<li>The DXL fabric to which the client will connect has been bridged to Cisco
pxGrid.</li>
<li>The Python client has been authorized to perform <code class="docutils literal"><span class="pre">DXL</span> <span class="pre">Cisco</span> <span class="pre">pxGrid</span> <span class="pre">Queries</span></code>
(see <a class="reference internal" href="pxgridauth.html"><span class="doc">Authorize Client to Use Cisco pxGrid via DXL</span></a>).</li>
<li>A session has been established with the Cisco Identity Services Engine (ISE)
server for an endpoint. The endpoint’s IP address will be used when running
this example. For an example on creating a simulated session for testing, see
the Cisco RADIUS Simulator command examples in
<a class="reference internal" href="basicidentitysessionnotificationexample.html"><span class="doc">Basic pxGrid Session Notification Example</span></a>.</li>
</ul>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Update the following line in the sample:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">HOST_IP</span> <span class="o">=</span> <span class="s2">&quot;&lt;SPECIFY_IP_ADDRESS&gt;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>To specify the IP address of an endpoint for which to send the mitigation
action. For example:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">HOST_IP</span> <span class="o">=</span> <span class="s2">&quot;192.168.1.1&quot;</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running">
<h2>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h2>
<p>To run this sample execute the
<code class="docutils literal"><span class="pre">sample/basic/basic_eps_send_mitigation_action_by_ip_example.py</span></code> script as
follows:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">sample</span><span class="o">/</span><span class="n">basic</span><span class="o">/</span><span class="n">basic_eps_send_mitigation_action_by_ip_example</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div></blockquote>
<p>If the action can be sent successfully, the output should appear similar to
the following:</p>
<blockquote>
<div><div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;gid&quot;</span><span class="p">:</span> <span class="s2">&quot;150&quot;</span><span class="p">,</span>
    <span class="nt">&quot;macInterface&quot;</span><span class="p">:</span> <span class="s2">&quot;00:11:22:33:44:55&quot;</span><span class="p">,</span>
    <span class="nt">&quot;mitigationStatus&quot;</span><span class="p">:</span> <span class="s2">&quot;complete&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>The received results are displayed.</p>
<p>If no session has been established for an endpoint which corresponds to the IP
address, an <code class="docutils literal"><span class="pre">Exception</span></code> should be raised and output similar to the following
should appear:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Error</span><span class="p">:</span> <span class="n">Session</span> <span class="n">lookup</span> <span class="n">failure</span> <span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="details">
<h2>Details<a class="headerlink" href="#details" title="Permalink to this headline">¶</a></h2>
<p>The majority of the sample code is shown below:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># IP address of the endpoint for which to send the mitigation action</span>
<span class="n">HOST_IP</span> <span class="o">=</span> <span class="s2">&quot;&lt;SPECIFY_IP_ADDRESS&gt;&quot;</span>

<span class="c1"># Create the client</span>
<span class="k">with</span> <span class="n">DxlClient</span><span class="p">(</span><span class="n">config</span><span class="p">)</span> <span class="k">as</span> <span class="n">dxl_client</span><span class="p">:</span>

    <span class="c1"># Connect to the fabric</span>
    <span class="n">dxl_client</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Connected to DXL fabric.&quot;</span><span class="p">)</span>

    <span class="c1"># Create client wrapper</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">CiscoPxGridClient</span><span class="p">(</span><span class="n">dxl_client</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Invoke &#39;send mitigation action by IP&#39; method on service</span>
        <span class="n">resp_dict</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">eps</span><span class="o">.</span><span class="n">send_mitigation_action_by_ip</span><span class="p">(</span>
            <span class="n">HOST_IP</span><span class="p">,</span>
            <span class="n">EpsAction</span><span class="o">.</span><span class="n">QUARANTINE</span><span class="p">)</span>

        <span class="c1"># Print out the response (convert dictionary to JSON for pretty</span>
        <span class="c1"># printing)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Response:</span><span class="se">\n</span><span class="s2">{0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">MessageUtils</span><span class="o">.</span><span class="n">dict_to_json</span><span class="p">(</span><span class="n">resp_dict</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="bp">True</span><span class="p">)))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="c1"># An exception should be raised if no session exists for the endpoint.</span>
        <span class="k">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">))</span>
</pre></div>
</div>
</div></blockquote>
<p>Once a connection is established to the DXL fabric, a
<a class="reference internal" href="dxlciscopxgridclient.client.html#dxlciscopxgridclient.client.CiscoPxGridClient" title="dxlciscopxgridclient.client.CiscoPxGridClient"><code class="xref py py-class docutils literal"><span class="pre">dxlciscopxgridclient.client.CiscoPxGridClient</span></code></a> instance is created which
will be used to integrate with Cisco pxGrid.</p>
<p>Next, the <a class="reference internal" href="dxlciscopxgridclient.client.html#dxlciscopxgridclient.client.EpsClientCategory.send_mitigation_action_by_ip" title="dxlciscopxgridclient.client.EpsClientCategory.send_mitigation_action_by_ip"><code class="xref py py-meth docutils literal"><span class="pre">dxlciscopxgridclient.client.EpsClientCategory.send_mitigation_action_by_ip()</span></code></a>
method is invoked with the IP address of the endpoint and a mitigation action,
<a class="reference internal" href="dxlciscopxgridclient.constants.html#dxlciscopxgridclient.constants.EpsAction.QUARANTINE" title="dxlciscopxgridclient.constants.EpsAction.QUARANTINE"><code class="xref py py-const docutils literal"><span class="pre">dxlciscopxgridclient.constants.EpsAction.QUARANTINE</span></code></a>.</p>
<p>The final step is to display the contents of the returned dictionary (<code class="docutils literal"><span class="pre">dict</span></code>)
which contains the results of the attempt to send the mitigation action.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic Send EPS Mitigation Action by IP Address Example</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#running">Running</a></li>
<li><a class="reference internal" href="#details">Details</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="basicancdeletepolicynotificationexample.html"
                        title="previous chapter">Basic Delete ANC Policy Notification Example</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="basicepssendmitigationactionbymacexample.html"
                        title="next chapter">Basic Send EPS Mitigation Action by MAC Address Example</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/basicepssendmitigationactionbyipexample.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="basicepssendmitigationactionbymacexample.html" title="Basic Send EPS Mitigation Action by MAC Address Example"
             >next</a> |</li>
        <li class="right" >
          <a href="basicancdeletepolicynotificationexample.html" title="Basic Delete ANC Policy Notification Example"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Cisco pxGrid DXL Client Library 0.1.2 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017 McAfee LLC.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.
    </div>
  </body>
</html>